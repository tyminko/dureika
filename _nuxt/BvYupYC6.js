import{f as U,r as d,j as i,X as q,x as B,c as f,i as a,a as C,W as h,n as j,G as A,o as _}from"./Ce5DlG4U.js";import{_ as L}from"./DlAUqK2U.js";const E=["srcset","sizes","src","alt"],M={key:1,class:"px-img empty"},N=U({__name:"UiImg",props:{src:{},alt:{},aspectRatio:{},square:{type:Boolean},orientation:{},size:{}},emits:["load"],setup(v,{emit:g}){const e=v,x=g,$=[100,200,400,800,1600,2e3],b={square:1/1,vertical:1/1.9,horizontal:1.9/1},m=d(null),r=d(!1),c=d(!1),y=i(()=>{const t=e.src;return t===void 0||t.startsWith("data:")||t.startsWith("blob:")?"":`url(${l(t,"placeholder",e.orientation)})`}),z=i(()=>{const t=e.src;return t===void 0||t.startsWith("data:")||t.startsWith("blob:")?t:l(t,400,e.orientation)}),W=i(()=>{const t=e.src;if(!(t===void 0||t.startsWith("data:")||t.startsWith("blob:")))return $.map(s=>[l(t,s,e.orientation),s]).map(([s,o])=>`${s} ${o}w`).join(", ")}),k=i(()=>e.size||"800px");function R(){const s=A().isHydrating;m.value?.complete&&s&&(r.value=!0,c.value=!1)}q(()=>R());const S=()=>{r.value=!0,c.value=!1};function w(){r.value=!1}B(r,t=>x("load",t),{immediate:!0});function I(t,s){const o=t==="placeholder"?50:t,n=t==="placeholder"?",bl-10,q-50":"";if(!s||s==="normal")return`tr:w-${o}${n}`;const p=b[s],u=Math.round(o/p);return`tr:w-${o},h-${u},fo-auto${n}`}function l(t,s,o){if(t.startsWith("/"))return t;const n=I(s,o),p=t.startsWith("https://i.vimeocdn.com")?"video/":"",u=decodeURIComponent(t.split(/(awc|video|appspot\.com\/o)\//).pop()??"");return`https://ik.imagekit.io/nqxb73nnx/${p}${n}/${u}`}return(t,s)=>a(c)?(_(),f("div",M)):(_(),f("div",{key:0,class:j(["px-img",{loaded:a(r)}]),style:h({"--placeholder-url":a(y),"aspect-ratio":e.aspectRatio})},[C("img",{ref_key:"imgRef",ref:m,srcset:a(W),sizes:a(k),src:a(z),alt:t.alt,style:h({"aspect-ratio":e.aspectRatio}),loading:"lazy",onLoad:S,onError:w},null,44,E)],6))}}),O=Object.assign(L(N,[["__scopeId","data-v-5e7b2d16"]]),{__name:"UiImg"});export{O as default};
