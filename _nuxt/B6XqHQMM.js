import{r as B}from"./BylOX-NH.js";import{u as H}from"./DJsnOlML.js";import{f as O,r as L,Z as T,j as s,x as F,X as P,c as d,a as m,k as R,i as o,W as $,n as V,o as p,P as j}from"./Ce5DlG4U.js";import{_ as U}from"./DlAUqK2U.js";import"./BN_7HF1G.js";const Y={key:0,class:"loading-indicator"},G=["src","srcset","sizes","width","height","alt","loading"],M={key:0},f=300,k=.1,X=500,Z=O({__name:"ContentImage",props:{src:{},alt:{},aspectRatio:{},width:{},height:{},maxW:{},maxH:{},crop:{type:Boolean},focus:{},loading:{},sizes:{},preset:{},provider:{},modifiers:{}},setup(x){const t=x,r=L(!1),l=L(!0),c=T("imgRef"),i=H(),C=s(()=>t.provider??i.options.provider),h=s(()=>t.preset??i.options.presets?.default?.preset??"default"),g=s(()=>i.options.presets?.[h.value]?.sizes??"sm:100vw md:100vw lg:100vw"),v=s(()=>i.getSizes(t.src,{sizes:g.value,width:t.width,height:t.height,preset:h.value,provider:C.value})),w=s(()=>v.value.src),I=s(()=>v.value.srcset);F(w,()=>{r.value=!1,l.value=!0,j(z)});const N=s(()=>({"--trans-dur":`${f}ms`,"--placeholder-delay":`${f*k}ms`,"--loading-show-delay":`${X}ms`}));function b(){r.value=!0,setTimeout(()=>{l.value=!1},f*k)}P(()=>{z()});const n=s(()=>{const e=t.aspectRatio;if(!e||e==="auto")return t.width&&t.height?t.width/t.height:void 0;if(typeof e=="number")return e>0?e:void 0;const a=String(e).trim(),u=Number(a);if(Number.isFinite(u)&&u>0)return u;const D=a.replace(/\s+/g,"").toLowerCase().replace(/Ã—/g,"x"),[E,W]=D.split(/[/:x]/),S=parseFloat(E??""),y=parseFloat(W??"");if(!(!S||!y))return S/y}),A=s(()=>{if(t.sizes)return t.sizes;if(n.value){const e=_(t.maxW??"100vw"),a=_(t.maxH??"100vh");return`min(${e}, ${a} * ${n.value})`}return g.value});function _(e){return typeof e=="number"?`${e}px`:e}function z(){c.value?.complete&&c.value?.naturalWidth>0&&(r.value=!0)}return(e,a)=>(p(),d("figure",{style:$({"--ar":o(n),...o(N)})},[m("div",{class:V(["image-wrap",{"image-loaded":o(r),"show-placeholder":o(l)}])},[o(r)?R("",!0):(p(),d("div",Y,a[0]||(a[0]=[m("span",{class:"dots"},null,-1)]))),m("img",{ref_key:"imgRef",ref:c,src:o(w),srcset:o(I),sizes:o(A),width:e.width,height:e.height,alt:e.alt,loading:e.loading,style:$({"--ar":o(n)}),onLoad:b},null,44,G)],2),e.$slots.default?(p(),d("figcaption",M,[B(e.$slots,"default",{mdcUnwrap:"p"},void 0,!0)])):R("",!0)],4))}}),te=Object.assign(U(Z,[["__scopeId","data-v-7e74e663"]]),{__name:"ContentImage"});export{te as default};
